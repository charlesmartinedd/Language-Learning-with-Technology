document.addEventListener("DOMContentLoaded",()=>{document.getElementById("bookmarkBtn")?.addEventListener("click",()=>{localStorage.setItem("lesson-1-bookmark",JSON.stringify({section:window.scrollY,timestamp:Date.now()})),alert("Progress bookmarked!")})});const q={q1:"b",q2:"b",q3:"a",q4:"b",q5:"a",q6:"b",q7:"b",q8:"b",q9:"c",q10:"b"},g={q1:"83% of children show increased engagement with app-based learning according to recent research.",q2:"AI tutors complement human interaction but should not replace it. They work best alongside real conversations and cultural experiences.",q3:"Duolingo is described as best for beginners with its gamified lessons and consistent daily practice approach.",q4:"Research shows it takes 21-66 days to form a new habit, depending on complexity and consistency.",q5:"A child practicing 10 minutes daily will outperform one who crams an hour weekly. Consistency is key.",q6:"The lesson recommends aiming for 5+ days of practice per week as a weekly goal.",q7:"You should focus on effort and consistency, not perfection. Mistakes are part of learning.",q8:"The lesson recommends checking weekly, not daily, to avoid micromanaging and reduce pressure.",q9:"For ages 8-10, the recommended routine is 20 minutes total daily practice.",q10:"AI tutors like ChatGPT are best used for conversation practice with custom prompts tailored to your child's level."};document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("submitQuiz"),p=document.getElementById("retryQuiz"),d=document.getElementById("quizResults"),b=document.querySelectorAll(".question-card");document.querySelectorAll(".option").forEach(e=>{e.addEventListener("click",function(){const t=this.querySelector('input[type="radio"]');t.checked=!0,this.parentElement.querySelectorAll(".option").forEach(c=>c.classList.remove("selected")),this.classList.add("selected")})}),l.addEventListener("click",()=>{let e=0,t=0;const s=Object.keys(q).length,c=[];for(let o=1;o<=s;o++){const r=`q${o}`,n=document.querySelector(`input[name="${r}"]:checked`);if(n){t++;const m=document.querySelector(`[data-question="${o}"]`),a=m.querySelector(".feedback");n.value===q[r]?(e++,m.classList.add("correct"),n.closest(".option").classList.add("correct-answer"),a.classList.add("correct"),a.innerHTML=`âœ“ Correct! ${g[r]}`,c.push({question:o,correct:!0})):(m.classList.add("incorrect"),n.closest(".option").classList.add("incorrect-answer"),m.querySelector(`input[value="${q[r]}"]`).closest(".option").classList.add("correct-answer"),a.classList.add("incorrect"),a.innerHTML=`âœ— Incorrect. ${g[r]}`,c.push({question:o,correct:!1})),a.style.display="block"}}if(t<s){alert(`Please answer all ${s} questions before submitting.`);return}const u=Math.round(e/s*100),i=u>=70;let y='<div class="review-summary"><h4>Question Review:</h4>';c.forEach(o=>{const r=o.correct?"âœ“":"âœ—",n=o.correct?"correct":"incorrect";y+=`<div class="review-item ${n}">${r} Question ${o.question}</div>`}),y+="</div>",d.querySelector(".results-content").innerHTML=`
        <div class="score-display ${i?"pass":"fail"}">${u}%</div>
        <div class="result-message">
          ${i?`<strong>ðŸŽ‰ Congratulations! You passed!</strong><br>You answered ${e} out of ${s} questions correctly.`:`<strong>Keep learning!</strong><br>You scored ${e} out of ${s}. You need 70% to pass. Review the material and try again!`}
        </div>
        ${y}
        ${i?`<a href="/course/certificate/?lesson=1&score=${u}" class="certificate-link" target="_blank">ðŸŽ“ Get Your Certificate</a>`:""}
      `,d.style.display="block",l.style.display="none",p.style.display=i?"none":"inline-block",d.scrollIntoView({behavior:"smooth",block:"nearest"}),localStorage.setItem("lesson-1-quiz-score",JSON.stringify({score:e,total:s,percentage:u,passed:i,timestamp:Date.now()}))}),p.addEventListener("click",()=>{b.forEach(e=>{e.classList.remove("correct","incorrect"),e.querySelectorAll(".option").forEach(t=>{t.classList.remove("selected","correct-answer","incorrect-answer")}),e.querySelectorAll('input[type="radio"]').forEach(t=>{t.checked=!1}),e.querySelector(".feedback").style.display="none"}),d.style.display="none",l.style.display="inline-block",p.style.display="none",document.querySelector(".quiz-container").scrollIntoView({behavior:"smooth"})});const h=localStorage.getItem("lesson-1-quiz-score");if(h){const e=JSON.parse(h);if(e.passed){const t=document.createElement("div");t.className="quiz-completed-banner",t.innerHTML=`
          <p>âœ“ You've already completed this quiz with a score of ${e.percentage}%.
          <a href="/course/certificate/?lesson=1&score=${e.percentage}" target="_blank">View Certificate</a></p>
        `,t.style.cssText="background: #d1fae5; padding: 1rem; border-radius: 6px; margin-bottom: 1rem; text-align: center; border: 2px solid #10b981;",document.querySelector(".quiz-container").prepend(t)}}});
